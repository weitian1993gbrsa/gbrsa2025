<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Speed Judge</title>
  <link rel="stylesheet" href="./styles.css"/>
  <script defer src="./app.js"></script>
  <script defer src="./config.js"></script>
  <script defer src="./speed.js"></script>
  <script defer src="./nozoom.js"></script>
<style>#entryIdInput{text-transform:uppercase;}</style>

<script>
// iOS focus fix
(function(){
  function ensureSize(el){
    try{ if(!el) return; 
      var t=el.tagName.toLowerCase();
      if(t==='input'||t==='textarea'||t==='select'){
        el.style.fontSize='16px'; 
        el.style.webkitTextSizeAdjust='100%'; 
      }
    }catch(e){}
  }
  document.addEventListener('focusin', e=>ensureSize(e.target), true);
  document.addEventListener('focusout', e=>{
    try{ e.target.style.fontSize=''; e.target.style.webkitTextSizeAdjust=''; }catch(e){}
  }, true);
})();
</script>

<script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>

<style>
  #btnOpenCamera { display: none !important; }
  #cameraWrap { display: none !important; }
  .scan-row { display: flex; gap: .75rem; align-items: center; }
  .scan-row .input { flex: 1; }
  .refresh-btn {
    margin-left: auto;
    padding: .5rem .9rem;
    border-radius: .6rem;
    border: 1px solid rgba(0,0,0,.1);
    background: #fff;
    box-shadow: 0 1px 2px rgba(0,0,0,.06);
  }
  .refresh-btn:active { transform: translateY(1px); }
</style>

</head>
<body class="page">

<!-- ⭐ FIXED BACK BUTTON -->
<header class="topbar">
  <button class="back" onclick="goBackToAdmin()" aria-label="Back">←</button>
  <img src="./assets/company-logo.png" alt="GBRSA" class="logo" />
  <div class="titles"><h1>Speed Judge</h1></div>
  <button id="btnRefresh" class="refresh-btn" title="Refresh">↻ Refresh</button>
</header>

<script>
function goBackToAdmin() {
    const key = new URLSearchParams(location.search).get("key");
    window.location.href = `admin.html?key=${key}`;
}
</script>
