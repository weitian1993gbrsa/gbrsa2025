<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Presentation Summary</title>

<style>
    body {
        margin: 0;
        background: #f5f5f5;
        font-family: system-ui, sans-serif;
    }

    /* HEADER */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        background: white;
        border-bottom: 2px solid #ddd;
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .top-btn {
        padding: 10px 20px;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 16px;
        cursor: pointer;
        background: #fff;
    }

    .submit-btn {
        background: #007bff;
        color: white;
        border: none;
    }

    h2 {
        margin: 0;
        font-size: 20px;
        font-weight: 700;
    }

    /* SCORE BAR */
    .score-bar {
        text-align: center;
        font-size: 20px;
        font-weight: 700;
        padding: 14px 0 4px;
    }

    .score-values {
        display: flex;
        justify-content: center;
        gap: 60px;
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 10px;
    }

    /* ROW LAYOUT */
    .row {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
        gap: 20px;
        align-items: center;
        margin: 20px auto;
        max-width: 900px;
        padding: 0 16px;
    }

    /* BUTTON BOXES */
    .box-minus, .box-plus {
        height: 110px;
        border-radius: 8px;
        display: flex;
        justify-content:center;
        align-items:center;
        flex-direction:column;
        font-size: 18px;
        color: white;
        user-select:none;
    }

    .box-minus { background: #d64545; }
    .box-plus  { background: #28c766; }

    /* LEVEL LABELS */
    .level-labels {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        text-align: center;
        font-size: 16px;
        font-weight: 700;
        margin-bottom: 6px;
    }

    .summary-slider {
        width: 100%;
        accent-color: #008000;
        height: 10px;
        border-radius: 10px;
    }
</style>
</head>
<body>

<!-- HEADER -->
<div class="top-bar">
    <button class="top-btn" onclick="history.back()">Back</button>
    <h2>Presentation Summary</h2>
    <button class="top-btn submit-btn" id="submitBtn">Submit</button>
</div>

<!-- SCORE + MISSES BAR -->
<div class="score-bar">
    <div class="score-values">
        <div id="scoreText">Score (0.0)</div>
        <div id="missText">Misses (0)</div>
    </div>
</div>

<div id="summaryContainer"></div>

<script>
/* LOAD DATA FROM PAGE 1 */
const data = JSON.parse(localStorage.getItem("presentationPage1")) || {
    creMinus: 0, crePlus: 0,
    musMinus: 0, musPlus: 0,
    entMinus: 0, entPlus: 0,
    formMinus: 0, formPlus: 0,
    varMinus: 0, varPlus: 0,
    misses: 0
};

/* IJRU WEIGHTS */
const WEIGHTS = {
    cre: 0.15,
    mus: 0.20,
    ent: 0.25,
    form: 0.25,
    var: 0.15
};

const categories = [
    { key: "cre", label: "Creativity" },
    { key: "mus", label: "Musicality" },
    { key: "ent", label: "Entertainment" },
    { key: "form", label: "Form" },
    { key: "var", label: "Variety" }
];

const container = document.getElementById("summaryContainer");

let totalScore = 0;

/* BUILD ROWS */
categories.forEach(cat => {

    const minus = data[cat.key + "Minus"];
    const plus  = data[cat.key + "Plus"];
    const finalScore = 12 + plus - minus;

    /* Add to total using IJRU weights */
    totalScore += finalScore * WEIGHTS[cat.key];

    container.innerHTML += `
        <div class="row">

            <!-- MINUS BOX -->
            <div class="box-minus">
                ${cat.label} -<br><b>${minus}</b>
            </div>

            <!-- SLIDER + LABEL LABELS -->
            <div>
                <div class="level-labels">
                    <div>0</div><div>12</div><div>24</div>
                </div>
                <input type="range" min="0" max="24" value="${finalScore}" disabled class="summary-slider">
            </div>

            <!-- PLUS BOX -->
            <div class="box-plus">
                ${cat.label} +<br><b>${plus}</b>
            </div>

        </div>
    `;
});

/* APPLY SCORE + MISSES */
const finalScore = (totalScore - data.misses).toFixed(1);

document.getElementById("scoreText").textContent = `Score (${finalScore})`;
document.getElementById("missText").textContent  = `Misses (${data.misses})`;

/* SUBMIT BUTTON */
document.getElementById("submitBtn").addEventListener("click", () => {
    alert("Submitting final presentation score: " + finalScore);
});
</script>

</body>
</html>
