<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>GBRSA 2025 – Speed Station</title>

  <link rel="stylesheet" href="./styles.css"/>

  <!-- Correct script order -->
  <script defer src="./config.js"></script>
  <script defer src="./app.js"></script>
  <script defer src="./speed.js"></script>   <!-- provides speedLookupById -->
  <script defer src="./station.js"></script> <!-- uses speedLookupById -->

  <style>
    html,body{touch-action:manipulation;}
    .station-card{width:100%;padding:15px;border-radius:10px;margin:10px 0;border:none;cursor:pointer;text-align:left}
    .pending{background:#2ecc71;color:#fff}
    .done{background:#1e63e9;color:#fff}
    .top-row{display:flex;justify-content:space-between;font-size:14px;margin-bottom:6px;opacity:.9}
    .name{font-weight:bold;font-size:18px;margin-bottom:3px}
    .team{font-size:14px;opacity:.9}
    .status{font-size:13px;margin-top:5px;opacity:.9}
  </style>
</head>

<body class="page">

<!-- HEADER -->
<header class="topbar">
  <img src="./assets/company-logo.png" class="logo"/>
  <div class="titles">
    <h1>Speed Station <span id="stationLabel"></span></h1>
    <p class="subtitle">Tap a participant card to start judging.</p>
  </div>
  <button id="btnRefresh" class="btn" style="margin-left:auto">⟳ Refresh</button>
</header>

<main class="container">

  <!-- ===================== -->
  <!-- STATION PARTICIPANT LIST -->
  <!-- ===================== -->
  <section class="block">
    <h2>Entries for this Station</h2>
    <p class="hint">Tap a card to load the judge panel.</p>

    <div id="entryList" class="entry-list"></div>
  </section>


  <!-- ===================== -->
  <!-- SPEED JUDGE FORM (copied from speed.html) -->
  <!-- ===================== -->

  <section id="participantCard" class="block hide">
    <div class="row space">
      <h2>Participant</h2>
      <div class="badges">
        <span id="badgeHeat" class="badge">HEAT —</span>
        <span id="badgeStation" class="badge">STATION —</span>
        <span id="badgeEvent" class="badge">EVENT —</span>
        <span id="badgeDivision" class="badge">DIVISION —</span>
      </div>
    </div>
    <dl class="info">
      <div><dt>ID</dt><dd id="pId">—</dd></div>
      <div><dt>Names</dt><dd id="pNames">—</dd></div>
      <div><dt>Team</dt><dd id="pRep">—</dd></div>
      <div><dt>State</dt><dd id="pState">—</dd></div>
    </dl>
    <button id="btnConfirm" class="btn primary" disabled>Confirm & Start Scoring</button>
  </section>


  <section id="scoreFormWrap" class="block hide">
    <h2>Step 2 — Enter Score</h2>
    <form id="scoreForm" class="form">

      <div class="grid">
        <label class="field">
          <span>SCORE</span>
          <input name="SCORE" type="number" required min="0" class="input"/>
        </label>

        <label class="check">
          <input type="checkbox" name="FALSE START"/>
          <span>FALSE START</span>
        </label>

        <label class="field col-span-2">
          <span>REMARK</span>
          <input name="REMARK" class="input"/>
        </label>
      </div>

      <!-- Hidden fields -->
      <input type="hidden" name="ID" id="fId"/>
      <input type="hidden" name="NAME1" id="fNAME1"/>
      <input type="hidden" name="NAME2" id="fNAME2"/>
      <input type="hidden" name="NAME3" id="fNAME3"/>
      <input type="hidden" name="NAME4" id="fNAME4"/>
      <input type="hidden" name="TEAM" id="fREP"/>
      <input type="hidden" name="STATE" id="fSTATE"/>
      <input type="hidden" name="HEAT" id="fHEAT"/>
      <input type="hidden" name="STATION" id="fSTATION"/>
      <input type="hidden" name="EVENT" id="fEVENT"/>
      <input type="hidden" name="DIVISION" id="fDIVISION"/>

      <div class="row space">
        <button type="submit" class="btn primary">Submit Result</button>
      </div>

    </form>
  </section>

</main>


<!-- Submit overlay -->
<div id="submitOverlay" class="overlay hide">
  <div class="overlay-card">
    <div class="loading"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
    <div id="overlayText" class="overlay-text">Sending…</div>
  </div>
</div>

</body>
</html>
