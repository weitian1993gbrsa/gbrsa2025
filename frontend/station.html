<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Speed Station</title>
  <link rel="stylesheet" href="./styles.css"/>
  <script defer src="./app.js"></script>
  <script defer src="./config.js"></script>
  <script defer src="./speed.js"></script>
  <script defer src="./station.js"></script>
  <script defer src="./nozoom.js"></script>
  <style>
    .station-card-list {
      display:flex;
      flex-direction:column;
      gap:0.5rem;
    }
    .station-card {
      border-radius:12px;
      padding:0.75rem 0.85rem;
      border:1px solid var(--border);
      display:flex;
      flex-direction:column;
      text-align:left;
      cursor:pointer;
    }
    .station-card.pending {
      background:#22c55e;
      color:#ffffff;
    }
    .station-card.done {
      background:#2563eb;
      color:#ffffff;
    }
    .station-card .top-row {
      display:flex;
      justify-content:space-between;
      font-size:0.9rem;
      font-weight:600;
      opacity:0.95;
    }
    .station-card .name {
      margin-top:0.15rem;
      font-weight:700;
      font-size:1rem;
    }
    .station-card .team {
      margin-top:0.1rem;
      font-size:0.85rem;
      opacity:0.9;
    }
    .station-card .status {
      margin-top:0.2rem;
      font-size:0.8rem;
      text-transform:uppercase;
      letter-spacing:0.03em;
      opacity:0.9;
    }
  </style>
</head>
<body class="page">
  <header class="topbar">
    <a class="back" href="./index.html" aria-label="Back">←</a>
    <img src="./assets/company-logo.png" alt="GBRSA" class="logo" />
    <div class="titles">
      <h1>Speed Station <span id="stationLabel">1</span></h1>
      <div class="subtitle">Tap a card to start judging.</div>
    </div>
    <button id="btnRefresh" class="refresh-btn" title="Refresh">↻ Refresh</button>
  </header>

  <main class="container">
    <section class="block">
      <h2>Entries for this Station</h2>
      <div id="stationInfo" class="hint">Showing participants assigned to this station.</div>
      <div id="entryList" class="station-card-list"></div>
    </section>

    <section id="participantCard" class="block hide">
      <div class="row space">
        <h2>Participant</h2>
        <div class="badges">
          <span id="badgeHeat" class="badge">HEAT —</span>
          <span id="badgeStation" class="badge">STATION —</span>
          <span id="badgeEvent" class="badge">EVENT —</span>
          <span id="badgeDivision" class="badge">DIVISION —</span>
        </div>
      </div>
      <dl class="info">
        <div><dt>ID</dt><dd id="pId">—</dd></div>
        <div><dt>Names</dt><dd id="pNames">—</dd></div>
        <div><dt>Team</dt><dd id="pRep">—</dd></div>
        <div><dt>State</dt><dd id="pState">—</dd></div>
      </dl>
      <button id="btnConfirm" class="btn primary" disabled>Confirm & Start Scoring</button>
    </section>

    <section id="scoreFormWrap" class="block hide">
      <h2>Step 2 — Enter Score</h2>
      <form id="scoreForm" class="form">
        <div class="grid">
          <label class="field"><span>SCORE</span>
            <input name="SCORE" type="number" required min="0" class="input" placeholder="e.g. 156"/></label>
          <label class="check"><input type="checkbox" name="FALSE START"/> <span>FALSE START</span></label>
          <label class="field col-span-2"><span>REMARK</span><input name="REMARK" class="input" placeholder="Optional notes"/></label>
        </div>
        <!-- Hidden context -->
        <input type="hidden" name="ID" id="fId"/>
        <input type="hidden" name="NAME1" id="fNAME1"/>
        <input type="hidden" name="NAME2" id="fNAME2"/>
        <input type="hidden" name="NAME3" id="fNAME3"/>
        <input type="hidden" name="NAME4" id="fNAME4"/>
        <input type="hidden" name="TEAM" id="fREP"/>
        <input type="hidden" name="STATE" id="fSTATE"/>
        <input type="hidden" name="HEAT" id="fHEAT"/>
        <input type="hidden" name="STATION" id="fSTATION"/>
        <input type="hidden" name="EVENT" id="fEVENT"/>
        <input type="hidden" name="DIVISION" id="fDIVISION"/>

        <div class="row space"><button type="submit" class="btn primary">Submit Result</button></div>
      </form>
    </section>

  </main>

  <div id="submitOverlay" class="overlay hide" aria-live="polite" aria-busy="true">
    <div class="overlay-card">
      <div class="loading"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div id="overlayText" class="overlay-text">Sending…</div>
    </div>
  </div>

</body>
</html>
